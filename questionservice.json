{"openapi":"3.0.1","info":{"title":"Question Service API","description":"Endpoints for managing mock tests, questions, and attempts. Relationship fields are represented as IDs in DTOs.","contact":{"name":"Team","email":"team@example.com"},"license":{"name":"Apache 2.0","url":"http://www.apache.org/licenses/LICENSE-2.0.html"},"version":"1.0"},"servers":[{"url":"http://localhost:8082"}],"security":[{"bearerAuth":[]}],"tags":[{"name":"Mock Tests","description":"CRUD operations for mock tests. Relationship fields are represented by IDs in DTOs."},{"name":"Mock Questions","description":"CRUD operations for mock questions. Relationship fields are represented by IDs in DTOs."},{"name":"Mock Attempts","description":"CRUD operations for mock attempts. Relationship fields are represented by IDs in DTOs."}],"paths":{"/api/mock-tests/{id}":{"get":{"tags":["Mock Tests"],"summary":"Get mock test by ID","description":"Retrieve a single mock test by its ID.","operationId":"getById","parameters":[{"name":"id","in":"path","required":true,"schema":{"type":"integer","format":"int64"}}],"responses":{"200":{"description":"OK","content":{"*/*":{"schema":{"$ref":"#/components/schemas/MockTestResponseDTO"}}}}}},"put":{"tags":["Mock Tests"],"summary":"Update mock test","description":"Update an existing mock test by ID.","operationId":"update","parameters":[{"name":"id","in":"path","required":true,"schema":{"type":"integer","format":"int64"}}],"requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/MockTestRequestDTO"}}},"required":true},"responses":{"200":{"description":"OK","content":{"*/*":{"schema":{"$ref":"#/components/schemas/MockTestResponseDTO"}}}}}},"delete":{"tags":["Mock Tests"],"summary":"Delete mock test","description":"Delete a mock test by ID.","operationId":"delete","parameters":[{"name":"id","in":"path","required":true,"schema":{"type":"integer","format":"int64"}}],"responses":{"200":{"description":"OK"}}}},"/api/mock-questions/{id}":{"get":{"tags":["Mock Questions"],"summary":"Get mock question by ID","description":"Retrieve a single mock question by its ID.","operationId":"getById_1","parameters":[{"name":"id","in":"path","required":true,"schema":{"type":"integer","format":"int64"}}],"responses":{"200":{"description":"OK","content":{"*/*":{"schema":{"$ref":"#/components/schemas/MockQuestionResponseDTO"}}}}}},"put":{"tags":["Mock Questions"],"summary":"Update mock question","description":"Update an existing mock question by ID.","operationId":"update_1","parameters":[{"name":"id","in":"path","required":true,"schema":{"type":"integer","format":"int64"}}],"requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/MockQuestionRequestDTO"}}},"required":true},"responses":{"200":{"description":"OK","content":{"*/*":{"schema":{"$ref":"#/components/schemas/MockQuestionResponseDTO"}}}}}},"delete":{"tags":["Mock Questions"],"summary":"Delete mock question","description":"Delete a mock question by ID.","operationId":"delete_1","parameters":[{"name":"id","in":"path","required":true,"schema":{"type":"integer","format":"int64"}}],"responses":{"200":{"description":"OK"}}}},"/api/mock-tests":{"get":{"tags":["Mock Tests"],"summary":"List mock tests","description":"Retrieve all mock tests as DTOs.","operationId":"getAll","responses":{"200":{"description":"OK","content":{"*/*":{"schema":{"type":"array","items":{"$ref":"#/components/schemas/MockTestResponseDTO"}}}}}}},"post":{"tags":["Mock Tests"],"summary":"Create mock test","description":"Create a new mock test. Provide related entity IDs in the DTO.","operationId":"create","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/MockTestRequestDTO"}}},"required":true},"responses":{"200":{"description":"OK","content":{"*/*":{"schema":{"$ref":"#/components/schemas/MockTestResponseDTO"}}}}}}},"/api/mock-tests/{testId}/attempts/start":{"post":{"tags":["Mock Tests"],"summary":"Start attempt for test","description":"Create a new attempt for the current user for the given test. Enforces single in-progress attempt per user+test.","operationId":"startAttempt","parameters":[{"name":"testId","in":"path","required":true,"schema":{"type":"integer","format":"int64"}}],"responses":{"200":{"description":"OK","content":{"*/*":{"schema":{"$ref":"#/components/schemas/MockAttemptResponseDTO"}}}}}}},"/api/mock-questions":{"get":{"tags":["Mock Questions"],"summary":"List mock questions","description":"Retrieve all mock questions as DTOs.","operationId":"getAll_1","responses":{"200":{"description":"OK","content":{"*/*":{"schema":{"type":"array","items":{"$ref":"#/components/schemas/MockQuestionResponseDTO"}}}}}}},"post":{"tags":["Mock Questions"],"summary":"Create mock question","description":"Create a new mock question. Provide related entity IDs in the DTO.","operationId":"create_1","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/MockQuestionRequestDTO"}}},"required":true},"responses":{"200":{"description":"OK","content":{"*/*":{"schema":{"$ref":"#/components/schemas/MockQuestionResponseDTO"}}}}}}},"/api/mock-attempts/{id}/grade":{"post":{"tags":["Mock Attempts"],"summary":"Finalize and grade attempt","description":"Finalize a mock attempt after its end time and compute total points.","operationId":"finalizeAndGrade","parameters":[{"name":"id","in":"path","required":true,"schema":{"type":"integer","format":"int64"}}],"responses":{"200":{"description":"OK","content":{"*/*":{"schema":{"$ref":"#/components/schemas/MockAttemptResponseDTO"}}}}}}},"/api/mock-attempts/{id}/answers":{"post":{"tags":["Mock Attempts"],"summary":"Add answer to attempt","description":"Add an answer to a mock attempt within its active time window.","operationId":"addAnswer","parameters":[{"name":"id","in":"path","required":true,"schema":{"type":"integer","format":"int64"}}],"requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/MockAnswerRequestDTO"}}},"required":true},"responses":{"200":{"description":"OK","content":{"*/*":{"schema":{"$ref":"#/components/schemas/MockAnswerSubmissionResultDTO"}}}}}}},"/api/mock-tests/lesson/{lessonId}":{"get":{"tags":["Mock Tests"],"summary":"List mock tests by lesson","description":"Retrieve mock tests associated with the given lesson ID.","operationId":"getByLesson","parameters":[{"name":"lessonId","in":"path","required":true,"schema":{"type":"integer","format":"int64"}}],"responses":{"200":{"description":"OK","content":{"*/*":{"schema":{"type":"array","items":{"$ref":"#/components/schemas/MockTestResponseDTO"}}}}}}}},"/api/mock-attempts":{"get":{"tags":["Mock Attempts"],"summary":"List mock attempts","description":"Retrieve all mock attempts as DTOs.","operationId":"getAll_2","responses":{"200":{"description":"OK","content":{"*/*":{"schema":{"type":"array","items":{"$ref":"#/components/schemas/MockAttemptResponseDTO"}}}}}}}},"/api/mock-attempts/{id}":{"get":{"tags":["Mock Attempts"],"summary":"Get mock attempt by ID","description":"Retrieve a single mock attempt by its ID.","operationId":"getById_2","parameters":[{"name":"id","in":"path","required":true,"schema":{"type":"integer","format":"int64"}}],"responses":{"200":{"description":"OK","content":{"*/*":{"schema":{"$ref":"#/components/schemas/MockAttemptResponseDTO"}}}}}},"delete":{"tags":["Mock Attempts"],"summary":"Delete mock attempt","description":"Delete a mock attempt by ID.","operationId":"delete_2","parameters":[{"name":"id","in":"path","required":true,"schema":{"type":"integer","format":"int64"}}],"responses":{"200":{"description":"OK"}}}},"/api/mock-attempts/{id}/me":{"get":{"tags":["Mock Attempts"],"summary":"Get my mock attempt by ID","description":"Retrieve a mock attempt by its ID only if it belongs to the current authenticated user.","operationId":"getMyAttemptById","parameters":[{"name":"id","in":"path","required":true,"schema":{"type":"integer","format":"int64"}}],"responses":{"200":{"description":"OK","content":{"*/*":{"schema":{"$ref":"#/components/schemas/MockAttemptResponseDTO"}}}}}}},"/api/mock-attempts/me":{"get":{"tags":["Mock Attempts"],"summary":"List my mock attempts","description":"Retrieve all mock attempts for the current authenticated user.","operationId":"getMyAttempts","responses":{"200":{"description":"OK","content":{"*/*":{"schema":{"type":"array","items":{"$ref":"#/components/schemas/MockAttemptResponseDTO"}}}}}}}}},"components":{"schemas":{"MockTestRequestDTO":{"type":"object","properties":{"name":{"type":"string"},"durationSeconds":{"type":"integer","format":"int64"},"totalPoint":{"type":"integer","format":"int32"},"lessonPlanId":{"type":"integer","format":"int64"},"requiredTier":{"type":"string","enum":["BASIC","SILVER","GOLD","PLATINUM"]},"questionIds":{"type":"array","items":{"type":"integer","format":"int64"}}}},"MockOptionResponseDTO":{"type":"object","properties":{"id":{"type":"integer","format":"int64"},"name":{"type":"string"},"answer":{"type":"boolean"},"questionId":{"type":"integer","format":"int64"},"createdDate":{"type":"string","format":"date-time"},"updatedDate":{"type":"string","format":"date-time"}}},"MockQuestionResponseDTO":{"type":"object","properties":{"id":{"type":"integer","format":"int64"},"question":{"type":"string"},"point":{"type":"integer","format":"int32"},"questionType":{"type":"string","enum":["MULTIPLE_CHOICES","ESSAY"]},"testId":{"type":"integer","format":"int64"},"options":{"type":"array","items":{"$ref":"#/components/schemas/MockOptionResponseDTO"}},"answerId":{"type":"integer","format":"int64"},"createdDate":{"type":"string","format":"date-time"},"updatedDate":{"type":"string","format":"date-time"}}},"MockTestResponseDTO":{"type":"object","properties":{"id":{"type":"integer","format":"int64"},"name":{"type":"string"},"durationSeconds":{"type":"integer","format":"int64"},"totalPoint":{"type":"integer","format":"int32"},"lessonPlanId":{"type":"integer","format":"int64"},"requiredTier":{"type":"string","enum":["BASIC","SILVER","GOLD","PLATINUM"]},"questions":{"type":"array","items":{"$ref":"#/components/schemas/MockQuestionResponseDTO"}},"createdDate":{"type":"string","format":"date-time"},"updatedDate":{"type":"string","format":"date-time"}}},"MockQuestionRequestDTO":{"type":"object","properties":{"question":{"type":"string"},"point":{"type":"integer","format":"int32"},"questionType":{"type":"string","enum":["MULTIPLE_CHOICES","ESSAY"]},"testId":{"type":"integer","format":"int64"},"optionIds":{"type":"array","items":{"type":"integer","format":"int64"}},"answerId":{"type":"integer","format":"int64"}}},"MockAnswerResponseDTO":{"type":"object","properties":{"id":{"type":"integer","format":"int64"},"accountId":{"type":"integer","format":"int64"},"answerPoint":{"type":"integer","format":"int32"},"maxPoint":{"type":"integer","format":"int32"},"questionType":{"type":"string","enum":["MULTIPLE_CHOICES","ESSAY"]},"answerText":{"type":"string"},"comments":{"type":"string"},"mockOptionId":{"type":"integer","format":"int64"},"mockQuestionId":{"type":"integer","format":"int64"},"mockAttemptId":{"type":"integer","format":"int64"},"createdDate":{"type":"string","format":"date-time"},"updatedDate":{"type":"string","format":"date-time"}}},"MockAttemptResponseDTO":{"type":"object","properties":{"id":{"type":"integer","format":"int64"},"userId":{"type":"integer","format":"int64"},"userSubscriptionId":{"type":"integer","format":"int64"},"attemptPoint":{"type":"integer","format":"int32"},"maxPoint":{"type":"integer","format":"int32"},"duration":{"type":"object","properties":{"seconds":{"type":"integer","format":"int64"},"zero":{"type":"boolean"},"nano":{"type":"integer","format":"int32"},"negative":{"type":"boolean"},"positive":{"type":"boolean"},"units":{"type":"array","items":{"type":"object","properties":{"durationEstimated":{"type":"boolean"},"timeBased":{"type":"boolean"},"dateBased":{"type":"boolean"}}}}}},"startTime":{"type":"string","format":"date-time"},"endTime":{"type":"string","format":"date-time"},"mockTestId":{"type":"integer","format":"int64"},"status":{"type":"string","enum":["IN_PROGRESS","FINISHED"]},"mockAnswers":{"type":"array","items":{"$ref":"#/components/schemas/MockAnswerResponseDTO"}},"createdDate":{"type":"string","format":"date-time"},"updatedDate":{"type":"string","format":"date-time"}}},"MockAnswerRequestDTO":{"type":"object","properties":{"accountId":{"type":"integer","format":"int64"},"answerText":{"type":"string"},"mockOptionId":{"type":"integer","format":"int64"},"mockQuestionId":{"type":"integer","format":"int64"},"mockAttemptId":{"type":"integer","format":"int64"}}},"MockAnswerSubmissionResultDTO":{"type":"object","properties":{"answer":{"$ref":"#/components/schemas/MockAnswerResponseDTO"},"finalizedAttempt":{"$ref":"#/components/schemas/MockAttemptResponseDTO"},"finalized":{"type":"boolean"},"message":{"type":"string"}}}},"securitySchemes":{"bearerAuth":{"type":"http","scheme":"bearer","bearerFormat":"JWT"}}}}